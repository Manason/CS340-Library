<!DOCTYPE HTML>

<html>
<head>
	<title>Library Catalog</title>
	<link type="text/css" rel="stylesheet" href="/css/index.css">
	<script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<h1>Library Catalog</h1>
<ul id="nav">
	<li><a href="/donate/book">Donate Book</a></li>
	<li><a href="/donate/film">Donate Film</a></li>
	<li><a href="/signup">Sign Up</a></li>
</ul>

<main>
	
</main>


<script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
<script>
	var socket = io();
	socket.emit('getCatalog');
	socket.on('catalog',function(data){
		data.forEach(function(item){
			var data = {mediaID: item.mediaID, type : item.type};
				socket.emit('getMedia',data);
		});
	});
	socket.on('media',function(item){
		var title = $('<span/>').addClass('listingTitle').text(item[0].title);
		var creator;
		if(item[0].author!=null){
			creator = $('<span/>').addClass('listingCreator').text(item[0].author);
		} else if(item[0].director!=null){
			creator = $('<span/>').addClass('listingCreator').text(item[0].director);
		}
		var section = $('<span/>').addClass('listingSection').text(item[0].sectionName);
		var type = $('<span/>').addClass('listingType').text(item[0].type);
		var listing = $('<div/>').addClass('listing').append(title,creator,section,type);
		$('main').append(listing);
	});
</script>
</body>
</html>

